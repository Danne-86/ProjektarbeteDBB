  <div class="container mx-auto px-4 py-8 max-w-3xl">

    <h1 class="text-3xl font-bold mb-6"><%= title || 'Latest posts' %></h1>

    <!--- Display success or error messages -->
    <% if (typeof successMessage !== 'undefined' && successMessage) { %>
  <div class="mb-6 bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded-lg">
    <%= successMessage %>
  </div>
<% } %>

<% if (typeof errorMessage !== 'undefined' && errorMessage) { %>
  <div class="mb-6 bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded-lg">
    <%= errorMessage %>
  </div>
<% } %>

    <% if (!posts || posts.length === 0) { %>
      <p class="text-gray-600">No posts yet.</p>
    <% } else { %>
      <ul class="space-y-4">
        <% posts.forEach(p => { %>
          <li class="relative group bg-white rounded-xl shadow p-5 overflow-hidden">
            <!-- Full-card overlay link -->
            <a
              href="/posts/<%= p.id %>"
              aria-label="Open post"
              class="absolute inset-0 z-10 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-xl"
            ></a>

            <!-- Title (overlayed link) -->
            <h2 class="text-xl font-semibold mb-2 group-hover:underline">
              <%= p.header %>
            </h2>

            <% if (p.hero_image) { %>
              <img
                src="<%= p.hero_image %>"
                alt="Post image"
                class="w-full rounded mb-3 max-h-60 object-cover"
              />
            <% } %>

            <p class="text-gray-700 mb-3 break-all"><%= p.excerpt %></p>

            <div class="text-sm text-gray-500">
              <!-- username above link -->
              By
              <a
                href="/u/<%= encodeURIComponent(p.username) %>"
                class="relative z-20 font-medium text-indigo-700 hover:underline"
              >
                @<%= p.username %>
              </a>
              Â· <%= new Date(p.created_at).toLocaleString() %>
            </div>
          </li>
        <% }) %>
      </ul>
    <% } %>
  </div>